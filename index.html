<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bookmarklet Launcher</title>
  <style>
    .bookmarklet-btn {
      display: inline-block;
      padding: 10px 20px;
      background-color: #2196F3;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      cursor: move;
    }
    .bookmarklet-btn:hover {
      background-color: #1976D2;
    }
  </style>
</head>
<body>
  <h1>Drag this to your Bookmarks Bar!</h1>
  <p>Click and drag the button below to your bookmarks bar to install the tool.</p>
  <a class="bookmarklet-btn" href="#" id="bookmarkletLink">Install Bookmarklet</a>
<!--    latest code of both  -->
  <script>
    var bookmarkletCode = "(function(){var html='<div id=\"myDiv\" style=\"position:absolute;top:0;left:0;z-index:9999;background-color:#f1f1f1;text-align:center;border:1px solid #d3d3d3;width:400px;padding:5px;display:flex;flex-direction:column;\"><div id=\"mydivheader\" style=\"display:flexbox;justify-content:space-between;align-items:center;cursor:move;z-index:10000;background-color:#2196F3;color:#fff;user-select:none;\"><span style=\"position:relative;top:20px\">Click here to move</span><button class=\"hamburger-btn\" style=\"font-size:32px;background:none;margin-top:0px;border:none;cursor:pointer;color:white;float:inline-end;\">â˜°</button></div><div id=\"panel\" style=\"background-color:aqua;padding:20px\"><p style=\"margin-bottom:30px\">Javascript injection</p><textarea id=\"jsInput\" style=\"margin:auto;width:95%;margin-top:10px;padding:5px;resize:both;\" rows=\"20\" placeholder=\"Type JavaScript here...\"></textarea><button id=\"runBtn\" style=\"margin-top:10px;background:blue;color:#fff;border:none;padding:5px 10px;cursor:pointer;\">Run</button></div><div id=\"testButtonsSection\" style=\"background-color:#e8f4f8;padding:15px;margin:10px 0;border-radius:5px;\"><h4 style=\"margin-top:0;color:#333;\">Quick Test Buttons (CSP-Safe)</h4><div id=\"testButtons\" style=\"display:flex;flex-wrap:wrap;gap:5px;\"><button id=\"testBtn1\" class=\"test-btn\" style=\"background:#4CAF50;color:white;border:none;padding:8px 12px;margin:2px;border-radius:3px;cursor:pointer;font-size:12px;\">DOM Inspector</button><button id=\"testBtn2\" class=\"test-btn\" style=\"background:#4CAF50;color:white;border:none;padding:8px 12px;margin:2px;border-radius:3px;cursor:pointer;font-size:12px;\">Image Counter</button><button id=\"testBtn3\" class=\"test-btn\" style=\"background:#4CAF50;color:white;border:none;padding:8px 12px;margin:2px;border-radius:3px;cursor:pointer;font-size:12px;\">Form Fields</button><button id=\"testBtn4\" class=\"test-btn\" style=\"background:#4CAF50;color:white;border:none;padding:8px 12px;margin:2px;border-radius:3px;cursor:pointer;font-size:12px;\">Page Info</button><button id=\"testBtn5\" class=\"test-btn\" style=\"background:#4CAF50;color:white;border:none;padding:8px 12px;margin:2px;border-radius:3px;cursor:pointer;font-size:12px;\">Link Checker</button></div><div style=\"margin-top:10px;\"><input type=\"text\" id=\"newButtonName\" placeholder=\"New button name...\" style=\"padding:5px;width:150px;\"><button id=\"addTestBtn\" style=\"background:green;margin-top:10px;color:#fff;border:none;padding:5px 10px;cursor:pointer;\">Add Button</button></div></div><button id=\"closeBtn\" style=\"margin-top:10px;background:blue;color:#fff;border:none;padding:5px 10px;cursor:pointer;\">Close</button><button id=\"wsBtn\" style=\"margin-top:10px;background:blue;color:#fff;border:none;padding:5px 10px;cursor:pointer;\">Test WebSocket</button><button id=\"fetchBtn\" style=\"margin-top:10px;background:blue;color:#fff;border:none;padding:5px 10px;cursor:pointer;\">Test Fetch</button><button id=\"snapBtn\" style=\"margin-top:10px;background:blue;color:#fff;border:none;padding:5px 10px;cursor:pointer;\">Take Snapshot</button><p id=\"debug\" style=\"color:#333;\">Debug goes here</p></div>';var container=document.createElement('div');document.body.appendChild(container);container.innerHTML=html;var panel=document.getElementById('myDiv');var header=document.getElementById('mydivheader');var input=document.getElementById('jsInput');function dragElement(el,header){var x1=0,x2=0,y1=0,y2=0;header.onmousedown=function(e){e.preventDefault();e.stopPropagation();y1=e.clientX;y2=e.clientY;document.onmousemove=function(e){e.preventDefault();x1=y1-e.clientX;x2=y2-e.clientY;y1=e.clientX;y2=e.clientY;el.style.top=(el.offsetTop-x2)+'px';el.style.left=(el.offsetLeft-x1)+'px';};document.onmouseup=function(){document.onmousemove=null;document.onmouseup=null;};};el.onmousedown=function(e){e.stopPropagation();};}dragElement(panel,header);setTimeout(function(){input.focus();},0);document.getElementById('runBtn').addEventListener('click',function(){try{var code=input.value;var fn=new Function(code);fn();document.getElementById('debug').textContent='Code executed successfully!';}catch(e){document.getElementById('debug').textContent='Error: '+e.message;}});document.getElementById('closeBtn').addEventListener('click',function(){panel.remove();});document.getElementById('wsBtn').addEventListener('click',function(){var ws=new WebSocket('wss://ws.postman-echo.com/raw');ws.addEventListener('open',function(){ws.send('Hello, WebSocket!');});ws.addEventListener('message',function(e){console.log('Message:',e.data);ws.close();});ws.addEventListener('close',function(){console.log('WebSocket closed');});ws.addEventListener('error',function(e){console.error('WebSocket error:',e);});});document.getElementById('fetchBtn').addEventListener('click',function(){fetch('https://jsonplaceholder.typicode.com/posts/1').then(res=>res.ok?res.json():Promise.reject('Network error: '+res.statusText)).then(data=>console.log('Fetched:',data)).catch(e=>console.error('Fetch Error:',e));});document.getElementById('snapBtn').addEventListener('click',function(){fetch('https://your-server.com/snapshot',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url:window.location.href})}).then(res=>res.ok?res.blob():Promise.reject('Snapshot failed: '+res.statusText)).then(blob=>{var imgUrl=URL.createObjectURL(blob);window.open(imgUrl,'_blank');document.getElementById('debug').textContent='Snapshot taken!';}).catch(e=>document.getElementById('debug').textContent='Snapshot Error: '+e.message);});var testFunctions={'DOM Inspector':function(){var elements=document.querySelectorAll('*');var info='Elements: '+elements.length+'\\n';info+='Images: '+document.images.length+'\\n';info+='Links: '+document.links.length+'\\n';info+='Forms: '+document.forms.length;document.getElementById('debug').textContent=info;},'Image Counter':function(){var images=document.querySelectorAll('img');var loaded=0;var total=images.length;var urls='';images.forEach(function(img){if(img.complete&&img.naturalWidth>0){loaded++;urls+=img.src+'\\n';}});document.getElementById('debug').textContent=urls+' Images: '+loaded+'/'+total+' loaded';},'Form Fields':function(){var inputs=document.querySelectorAll('input, textarea, select');var info='Form fields found: '+inputs.length+'\\n';var types={};inputs.forEach(function(input){var type=input.type||input.tagName.toLowerCase();types[type]=(types[type]||0)+1;});for(var type in types){info+=type+': '+types[type]+'\\n';}document.getElementById('debug').textContent=info;},'Page Info':function(){var info='Title: '+document.title+'\\n';info+='URL: '+window.location.href+'\\n';info+='Domain: '+window.location.hostname+'\\n';info+='Protocol: '+window.location.protocol;document.getElementById('debug').textContent=info;},'Link Checker':function(){var links=document.querySelectorAll('a[href]');var external=0;var internal=0;var mailto=0;links.forEach(function(link){var href=link.href;if(href.startsWith('mailto:')){mailto++;}else if(href.startsWith('http')&&!href.includes(window.location.hostname)){external++;}else{internal++;}});var info='Total links: '+links.length+'\\n';info+='Internal: '+internal+'\\n';info+='External: '+external+'\\n';info+='Mailto: '+mailto;document.getElementById('debug').textContent=info;}};document.getElementById('testBtn1').addEventListener('click',testFunctions['DOM Inspector']);document.getElementById('testBtn2').addEventListener('click',testFunctions['Image Counter']);document.getElementById('testBtn3').addEventListener('click',testFunctions['Form Fields']);document.getElementById('testBtn4').addEventListener('click',testFunctions['Page Info']);document.getElementById('testBtn5').addEventListener('click',testFunctions['Link Checker']);document.getElementById('addTestBtn').addEventListener('click',function(){var buttonName=document.getElementById('newButtonName').value.trim();if(buttonName){var testButtonsDiv=document.getElementById('testButtons');var newButton=document.createElement('button');newButton.className='test-btn';newButton.style.cssText='background:#4CAF50;color:white;border:none;padding:8px 12px;margin:2px;border-radius:3px;cursor:pointer;font-size:12px;';newButton.textContent=buttonName;newButton.addEventListener('click',function(){try{var code=document.getElementById('jsInput').value;if(code.trim()){var fn=new Function(code);fn();document.getElementById('debug').textContent=buttonName+' executed successfully!';}else{document.getElementById('debug').textContent='No code in textarea to execute for '+buttonName;}}catch(e){document.getElementById('debug').textContent=buttonName+' Error: '+e.message;}});testButtonsDiv.appendChild(newButton);document.getElementById('newButtonName').value='';}});document.querySelector('.hamburger-btn').addEventListener('click',function(){var testSection=document.getElementById('testButtonsSection');if(testSection.style.display==='none'){testSection.style.display='block';}else{testSection.style.display='none';}});})();";

    document.getElementById('bookmarkletLink').href = 'javascript:' + bookmarkletCode;
  </script>
</body>
</html>